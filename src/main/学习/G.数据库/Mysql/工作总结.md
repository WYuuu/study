# Table of Contents

* [500W数据初始30S优化后1s](#500w数据初始30s优化后1s)
* [Mybatis中更新Mysql时间多了一秒](#mybatis中更新mysql时间多了一秒)
* [优先级条件，怎么建立索引?](#优先级条件怎么建立索引)


# 500W数据初始30S优化后1s


# Mybatis中更新Mysql时间多了一秒

今天遇到代码生成的时间，更新到mysql时，多出一秒，

这是因为mysql的数据类型为datetime

当创建时间是2020-04-25 22:30:50.771，毫秒被四舍五入为2020-04-25 22:30:51

解决：

+ 将mysql时间类型改为datetime(3)【建议】
+ java传入时间，去掉毫秒值。



# 优先级条件，怎么建立索引?

背景：查询一个数据，数据量大概500W左右，但是查询条件多样化

条件1：A+B+C+D+E

条件2：F+A+N+D+E

条件3：D+F+C+D+E

等等

条件1有直接返回，否则条件2，依次类推。



解决方案：

**在存储数据的时候，多建立一个字段，满足条件1就存条件1的值，依次类推。建立hash索引。**

查询直接匹配即可。

