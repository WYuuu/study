# Table of Contents

* [可扩展性和兼容性](#可扩展性和兼容性)
  * [请求参数和返回参数使用结构体](#请求参数和返回参数使用结构体)
  * [参考校验可以放在请求结构体中](#参考校验可以放在请求结构体中)
  * [可变参数配置化，实现动态切换](#可变参数配置化实现动态切换)
  * [接口改造，兼容老接口](#接口改造兼容老接口)
* [安全](#安全)
  * [当前接口请求是否为有效请求](#当前接口请求是否为有效请求)
  * [接口考虑是否需要防重处理和幂等处理](#接口考虑是否需要防重处理和幂等处理)
  * [重点接口，考虑线程池隔离。](#重点接口考虑线程池隔离)
  * [接口限流 熔断 降级](#接口限流-熔断-降级)
* [性能](#性能)
  * [使用缓存](#使用缓存)
  * [使用异步处理耗时方法](#使用异步处理耗时方法)
  * [拆分大事务](#拆分大事务)
  * [合理利用索引](#合理利用索引)
  * [合理控制锁的颗粒度](#合理控制锁的颗粒度)
* [异常处理](#异常处理)
* [日志记录](#日志记录)
  * [合理记录日志](#合理记录日志)
* [参考资料](#参考资料)




每个后端开发都不可避免跟接口打交道，**那么 如何写好一个接口？**

个人认为写好接口三要素

1. 可扩展性和兼容性
2. 安全
3. 性能
4. 异常处理
5. 日志记录

下文仔细谈谈这四点



# 可扩展性和兼容性



## 请求参数和返回参数使用结构体

```java
    public BoardQueryVO query(BoardQueryDTO boardQueryDTO) {
        //参数校验可以放在请求结构体中去做
        boardQueryDTO.check();
        //其他逻辑
        return new BoardQueryVO();
    }
```



## 参考校验可以放在请求结构体中



## 可变参数配置化，实现动态切换



## 接口改造，兼容老接口



# 安全

> 安全可以分为 请求是否有效和数据安全

## 当前接口请求是否为有效请求

如果你的API接口是对外提供的，需要保证接口的安全性。保证接口的安全性有**token机制和接口签名**。





## 接口考虑是否需要防重处理和幂等处理

## 重点接口，考虑线程池隔离。



## 接口限流 熔断 降级



# 性能

## 使用缓存

## 使用异步处理耗时方法

## 拆分大事务

## 合理利用索引

## 合理控制锁的颗粒度





# 异常处理



# 日志记录

## 合理记录日志


# 参考资料
https://mp.weixin.qq.com/s/RqsJ_1Ubqpgfv6FCwJmIsA
