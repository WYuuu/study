# Table of Contents

* [分布式CAP怎么理解（争议）](#分布式cap怎么理解争议)
  * [举列说明](#举列说明)
* [Base理论](#base理论)
* [怎么理解微服务？](#怎么理解微服务)
* [分布式锁](#分布式锁)
* [分布式事务](#分布式事务)


# 分布式CAP怎么理解（争议）


+ Partition-tolerance分区可容忍性 (必须存在)

   > 强调是：分区后系统要能提供可用服务！！
   
   分区容错性P其实就是每个服务都会部署多个节点，这样就可以保证此服务的一个节点挂了之后，此服务的其他节点依然可以响应 
   
+ Consistency一致性

  数据一致性，对于分布式项目来说,要保证数据的一致性，目前分布式项目的分为强一致性(2PC)和消息最终一致性(消息队列：记录和补偿)

  

   在满足了分区容错性P后，想要满足一致性C，一个服务的多个节点之间就必须进行数据复制达到数据一致之后再返回给调用者响应，然而在多个节点数据复制的过程中，可能节点之间会出现网络等问题使得数据复制阻塞或失败导致响应超时，服务调用失败，这就失去了系统的可用性A。 

  

+ Availability：可用性

   > 高性能？
   
   如果不强制满足强一致性，那在服务被调用的时候不用管数据复制的问题，直接返回响应，这就满足了可用性，但是由于此服务的多个节点数据可能没有完成复制，节点数据可能不一致，这就失去了系统的一致性。 



## 举列说明



理解CAP理论最简单的方式是想象两个**副本**处于分区两侧，即两个副本之间的网络断开，不能通信。

- 如果允许其中一个副本更新，则会导致数据不一致，即丧失了C性质。
- 如果为了保证一致性，将分区某一侧的副本设置为不可用，那么又丧失了A性质。
- 除非两个副本可以**互相通信**，才能既保证C又保证A，这又会导致**丧失P性质**。

一般来说使用网络通信的分布式系统，无法舍弃P性质，那么就只能在一致性和可用性上做一个艰难的选择。

> Q：一般来说使用网络通信的分布式系统，无法舍弃P性质
>
> A: 怕部分不可用影响整体不可用，舍弃了P,就像是单体了。






# Base理论

BASE理论是Basically Available(基本可用)，Soft State（软状态）和Eventually Consistent（最终一致性）三个短语的缩写。

> BASE 理论是对 CAP 理论的延伸，核心思想是即使无法做到强一致性（Strong Consistency，CAP 的一致性就是强一致性），但应用可以采用适合的方式达到最终一致性（Eventual Consitency）。



# 怎么理解微服务？

 微服务架构的核心目标是把复杂问题简单化，通过服务划分，把一个完整的系统拆分成多个高内聚、低耦合的小的子系统。使每个子系统可以独立的运行、升级和测试。然后再通过一些集成手段将这些子系统组合在一起，对外提供完整功能的过程。所以我们对微服务设计的过程就是对系统如何做拆分和集成的过程。 



我们目前拆分

+ web服务
+ 接口服务
+ 引擎服务
+ 报表服务
+ 计算服务





# 分布式锁



# 分布式事务

